<!DOCTYPE html> <html lang=" en "><head> <meta charset="utf-8" /> <title> System Hackig Step 3-1 - TouBVa </title> <meta http-equip="X-UA-Compatible" content="IE=edge" /> <meta name="viewport" content="width=device-width, initial-scale=1" /> <meta name="description" content="Dreamhack에서 공부한 것- System Hackig Step 3-1"> <meta name="keywords" content="System Hackig Step 3-1, TouBVa, System Hacking Basic,System Hacking, Computer Architecture, Register, OS basic"/> <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml" /> <meta content="" property="fb:app_id" /> <meta content="TouBVa" property="og:site_name" /> <meta content="System Hackig Step 3-1" property="og:title" /> <meta content="article" property="og:type" /> <meta content="Dreamhack에서 공부한 것" property="og:description" /> <meta content="http://localhost:4000/blog/system-hacking-step3-1/" property="og:url" /> <meta content="2022-07-10T21:10:23+09:00" property="article:published_time" /> <meta content="http://localhost:4000/about/" property="article:author" /> <meta content="http://localhost:4000/assets/img/syshack3-1/Untitled.jpeg" property="og:image" /> <meta content="System Hacking Basic" property="article:section" /> <!-- Twitter Cards --> <meta name="twitter:card" content="summary" /> <meta name="twitter:site" content="@" /> <meta name="twitter:creator" content="@" /> <meta name="twitter:title" content="System Hackig Step 3-1" /> <meta name="twitter:url" content="http://localhost:4000/blog/system-hacking-step3-1/" /> <meta name="twitter:description" content="Dreamhack에서 공부한 것" /> <link rel="stylesheet" href="http://localhost:4000/assets/css/main.css" /> <!-- <link rel="stylesheet" href="http://localhost:4000/assets/css/custom-style.css" /> --> <link rel="stylesheet" href="http://localhost:4000/assets/bower_components/lightgallery/dist/css/lightgallery.min.css" /> <link rel="stylesheet" href="https://cdn.snipcart.com/themes/v3.0.0-beta.3/default/snipcart.css" /> <link rel="stylesheet" href="http://localhost:4000/assets/bower_components/bootstrap/dist/css/bootstrap.min.css" /> <link rel="stylesheet" href="http://localhost:4000/assets/bower_components/font-awesome/web-fonts-with-css/css/fontawesome-all.min.css" /> <link rel="stylesheet" href="http://localhost:4000/assets/bower_components/icono/dist/icono.min.css" /> <!-- Fonts--> <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet" /> <!-- Favicon --> <link rel="icon" href="http://localhost:4000/assets/img/favicon.ico" type="image/gif" sizes="16x16" /> <script> var base_url = 'http://localhost:4000' ; </script> <!-- Jquery --> <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha384-vk5WoKIaW/vJyUAd9n/wmopsmNhiy+L2Z+SBxGYnUkunIxVxAv/UtMOhba/xskxh" crossorigin="anonymous" ></script> <!-- <script src="http://localhost:4000/assets/bower_components/jquery/dist/jquery.min.js"></script> --> <script src="http://localhost:4000/assets/bower_components/jquery.easing/jquery.easing.min.js"></script> <script src="http://localhost:4000/assets/bower_components/bootstrap/dist/js/bootstrap.bundle.min.js"></script> <script src="http://localhost:4000/assets/bower_components/jquery-mousewheel/jquery.mousewheel.min.js"></script> <script src="http://localhost:4000/assets/bower_components/ghosthunter/dist/jquery.ghostHunter.min.js"></script> <script src="http://localhost:4000/assets/bower_components/lightgallery/dist/js/lightgallery-all.min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/picturefill/3.0.2/picturefill.min.js"></script> <script src="http://localhost:4000/assets/bower_components/imagesloaded/imagesloaded.pkgd.min.js"></script> <script src="http://localhost:4000/assets/bower_components/nanobar/nanobar.min.js"></script> <script src="http://localhost:4000/assets/bower_components/typewrite/dist/typewrite.min.js"></script> <script src="http://localhost:4000/assets/js/search.js"></script> <script src="http://localhost:4000/assets/js/on-scroll-progress.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.20.1/moment.min.js"></script> <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script> <!-- for Mathjax support --> <script type="text/x-mathjax-config"> MathJax.Hub.Config({ TeX: { equationNumbers: { autoNumber: "AMS" } } }); </script> <script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> <!-- Github Button --> <script async defer src="https://buttons.github.io/buttons.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous" ></script> <!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--> <!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8"> <![endif]--> <!--[if IE 8]> <html class="no-js lt-ie9"> <![endif]--> <!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]--> </head> <body> <nav class="navbar navbar-expand-lg fixed-top navbar-dark" id="topNav"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation" > <span class="icono-hamburger" id="navbar-hamburger"> </span> </button> <a class="navbar-brand" href="/">TouBVa</a> <div class="collapse navbar-collapse" id="navbarNav"> <ul class="navbar-nav"> <li class="nav-item"> <a class="nav-link" href="http://localhost:4000/" >Home</a > </li> <li class="nav-item"> <a class="nav-link" href="http://localhost:4000/about" >About</a > </li> <li class="nav-item"> <a class="nav-link" href="http://localhost:4000/blog" >Blog</a > </li> <li class="nav-item"> <a class="nav-link" href="http://localhost:4000/contact" >Contact</a > </li> </ul> </div> <ul class="nav justify-content-end"> <li class="nav-item"> <a class="nav-link" href="http://localhost:4000/styleguide"> Styleguide </a> </li> <li class="nav-item"> <a class="nav-link toggle-search-button" href="#search"> <i class="fa fa-search search-icon" aria-hidden="true"></i> </a> </li> <li class="nav-item" style="margin-top:5px; padding-right:20px;" > <a class="header__checkout snipcart-checkout"> <svg width="31" height="27" viewBox="0 0 31 27" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M1.10512 0.368718C0.560256 0.368718 0.118164 0.812066 0.118164 1.35848C0.118164 1.9049 0.560256 2.34824 1.10512 2.34824H4.90887L8.30138 18.4009C8.43503 19.0053 8.83085 19.5079 9.32946 19.5041H25.7788C26.3005 19.5118 26.7799 19.0375 26.7799 18.5143C26.7799 17.9911 26.3006 17.5168 25.7788 17.5245H10.1315L9.71003 15.545H27.095C27.5371 15.5412 27.9547 15.2048 28.0511 14.7718L30.354 4.87412C30.4825 4.29933 29.9852 3.67172 29.3979 3.66786H7.21171L6.6771 1.15221C6.58329 0.71276 6.15921 0.368652 5.7107 0.368652L1.10512 0.368718ZM7.623 5.64746H12.7634L13.2569 8.61674H8.25005L7.623 5.64746ZM14.7785 5.64746H20.9881L20.4946 8.61674H15.2719L14.7785 5.64746ZM23.0031 5.64746H28.1537L27.4649 8.61674H22.5097L23.0031 5.64746ZM8.67181 10.5963H13.5862L14.0797 13.5656H9.29919L8.67181 10.5963ZM15.6009 10.5963H20.1656L19.6721 13.5656H16.0944L15.6009 10.5963ZM22.1807 10.5963H27.0023L26.3135 13.5656H21.6872L22.1807 10.5963ZM12.6197 20.164C10.8141 20.164 9.32979 21.6525 9.32979 23.4632C9.32979 25.2739 10.8141 26.7624 12.6197 26.7624C14.4252 26.7624 15.9095 25.2739 15.9095 23.4632C15.9095 21.6525 14.4252 20.164 12.6197 20.164ZM22.4892 20.164C20.6837 20.164 19.1994 21.6525 19.1994 23.4632C19.1994 25.2739 20.6837 26.7624 22.4892 26.7624C24.2948 26.7624 25.7791 25.2739 25.7791 23.4632C25.7791 21.6525 24.2948 20.164 22.4892 20.164ZM12.6197 22.1435C13.3586 22.1435 13.9356 22.7222 13.9356 23.4632C13.9356 24.2042 13.3586 24.7829 12.6197 24.7829C11.8807 24.7829 11.3037 24.2042 11.3037 23.4632C11.3037 22.7222 11.8807 22.1435 12.6197 22.1435ZM22.4892 22.1435C23.2282 22.1435 23.8052 22.7222 23.8052 23.4632C23.8052 24.2042 23.2282 24.7829 22.4892 24.7829C21.7503 24.7829 21.1733 24.2042 21.1733 23.4632C21.1733 22.7222 21.7503 22.1435 22.4892 22.1435Z" fill="#ff7901" class="header__checkout-fill"></path> </svg> <span class="snipcart-items-count"></span> <!-- <span class="snipcart-total-price"></span> --> </a> </li> <!-- <li class="nav-item"> <input class="nav-link switch" id="theme-toggle" onclick="modeSwitcher()" type="checkbox" name="checkbox" /> </li> --> </ul> </nav> <div id="progress-bar"></div> <!-- Search Form --> <div class="search-form-container"> <form class="search-form"> <fieldset class="search-form__fieldset"> <div class="row"> <div class="col-lg-8 offset-md-2"> <input class="search-form__field" placeholder="Type to Search..." autofocus> <input class="search-form__submit" type="submit" value="search"> </div> </div> </fieldset> </form> <div class="row"> <div class="col-lg-8 offset-md-2 search-results"> <div class="card search-results"></div> </div> </div> <div class="close-search-button search-form-container__close"> <i class="fa fa-times icon"></i> </div> </div><div class="main-container"> <div class="row justify-content-center" id="blog-post-container"> <div class="col-lg-10"><article class="card" itemscope itemtype="http://schema.org/BlogPosting"> <div class="card-header"> <h1 class="post-title" itemprop="name headline">System Hackig Step 3-1</h1> <h4 class="post-meta">Dreamhack에서 공부한 것</h4> <p class="post-summary"> Posted by : <span itemprop="author" itemscope itemtype="http://schema.org/Person"> <span itemprop="name"><a href="http://localhost:4000/blog/authors/TouBVa">TouBVa</a></span> </span > at <time datetime="2022-07-10 21:10:23 +0900" itemprop="datePublished" >Jul 10, 2022</time > </p> <span class="disqus-comment-count" data-disqus-identifier="/blog/system-hacking-step3-1/" ></span> <div class="post-categories"> Category : <a href="/blog/categories/System Hacking Basic" >System Hacking Basic</a > </div> </div> <div class="card-body" itemprop="articleBody"> <img class="card-img-top" src="http://localhost:4000/assets/img/syshack3-1/Untitled.jpeg" alt="" /> <br /> <br /> <h1 id="stage-3-1">STAGE 3-1</h1> <ul> <li>gdb 설치와 pwndbg 플러그인 설치하기.</li> <li>만일 뭔가 잘못해서 aslr 커맨드의 화이트리스트로~ 라는 경고문이 나온다면, 그건 여러 gdb 플러그인을 설치했기 때문에 .gdbinit 파일이 중복돼서 생기는 문제이므로 ~/.gdbinit 파일을 깨끗하게 지우고 설치했던 플러그인 폴더들을 다 지운 후 gdb가 여전히 남아 있는지 확인 한 번 해보고 다시 플러그인을 설치하는 것을 추천한다. 설치할 때의 instruction을 잘 따르자.</li> </ul> <h1 id="gdb-사용하기-기초">gdb 사용하기 기초</h1> <h2 id="tldr">TL;DR</h2> <ul> <li>gdb는 리눅스의 대표적인 디버거</li> <li>무료로 설치할 수 있고, 수많은 유용한 플러그인을 결합해 사용할 수 있음.</li> <li>다양한 명령어가 존재하며, 적재적소에 명령어를 사용할 때 그 진가를 발휘할 수 있음.</li> </ul> <hr /> <h2 id="prolog">Prolog</h2> <p>리눅스의 실행파일은 .elf이다. 이런 elf 파일의 정보를 읽어오기 위해 리눅스에서 기본으로 제공하고 있는 명령어가 있는데, 그것은 바로 <code class="language-plaintext highlighter-rouge">readelf</code> 이다.</p> <p><code class="language-plaintext highlighter-rouge">readelf -h {file path}</code> 를 실행해 대상 실행 파일의 헤더 정보를 읽어온 결과는 아래와 같이 표시된다.</p> <p><img src="/assets/img/syshack3-1/Untitled.jpeg" alt="readelf로 elf 파일의 헤더 정보를 읽어온 결과" /></p> <p>readelf로 elf 파일의 헤더 정보를 읽어온 결과</p> <p>이를 이용해 대상 파일의 EP, 즉 entry point를 알 수 있다. <strong>리버싱할 때 제일 중요한 게 바로 이 EP를 찾는 것</strong>인데, 리눅스 환경에서 ELF 파일은 손쉽게 EP를 알 수 있으므로 스타트는 쉽게 끊을 수 있다.</p> <p>다만 ASLR 이라고 리눅스 자체 메모리 보호 기법이 있는데, 힙이나 스택 등 어떤 프로세스를 실행할 때마다 그 프로세스에게 할당되는 가상 메모리의 주소가 전부 달라지는 기능이 있다. ASLR이 설정되어 있다면 디버깅할 때마다 모든 주소가 달라지는 진기명기를 확인할 수 있으니, ASLR을 꺼두는 것을 추천한다.</p> <p>ASLR이 함수의 EP에도 영향을 주는지는 내가 방금 ASLR을 끄고 디버깅해서 확인했다. 진짜로 끄는 것을 강력 추천한다.</p> <p>ASLR을 해제하기 위해서는 아래의 명령어를 터미널에 입력하면 된다.</p> <p><code class="language-plaintext highlighter-rouge">sudo sysctl -w kernel.randomize_va_space=0</code></p> <p>해당 elf 파일의 헤더 정보를 알아냈다면, 드디어 gdb를 이용해 실행 파일을 분석해 볼 시간이다.</p> <ol> <li><code class="language-plaintext highlighter-rouge">gdb {file_path}</code> 를 실행해 gdb를 해당 파일에 붙인다.</li> <li> <p><code class="language-plaintext highlighter-rouge">start</code> 명령어를 입력한다.</p> <p><img src="/assets/img/syshack3-1/Untitled%201.jpeg" alt="start 명령어를 실행한 결과." /></p> <p>start 명령어를 실행한 결과.</p> <ul> <li>gdb의 <code class="language-plaintext highlighter-rouge">start</code> 명령어는 EP부터 프로그램을 분석할 수 있게 해준다.</li> <li>현재 rip의 값은 DISASM 섹션의 화살표가 가리키고 있는 주소이다. <ul> <li>이 경우 <code class="language-plaintext highlighter-rouge">0x555555555149</code> 임을 확인할 수 있다.</li> <li><code class="language-plaintext highlighter-rouge">0x1149</code> 에 BP가 걸린 걸 보니 이 프로세스의 EP는 오프셋 <code class="language-plaintext highlighter-rouge">0x1149</code> 일 것이다.</li> <li> <p>아니 앞에서는 EP 주소가 <code class="language-plaintext highlighter-rouge">0x1060</code> 인데 왜 main의 엔트리는 <code class="language-plaintext highlighter-rouge">0x1149</code> 인 거야???</p> <p><img src="/assets/img/syshack3-1/Untitled%202.jpeg" alt="이해가 안 돼서 main의 엔트리와 원래 엔트리로 예상되는 주소의 데이터를 체크해 보았다." /></p> <p>이해가 안 돼서 main의 엔트리와 원래 엔트리로 예상되는 주소의 데이터를 체크해 보았다.</p> <p><code class="language-plaintext highlighter-rouge">_start</code> 함수는 컴파일할 때 자동으로 따라와 붙는 함수인데, 해당 함수의 끝 부분에서 <code class="language-plaintext highlighter-rouge">__libc_start_main</code> 이라는 dll을 호출한다. 해당 dll에서 연쇄적인 호출 과정을 거쳐서 내가 만든 프로세스의 진짜 엔트리인 <code class="language-plaintext highlighter-rouge">main</code> 이 호출되기 때문이 이와 같은 불일치 현상이 일어나는 것이다.</p> <p>한 마디로 elf 파일의 엔트리는 <code class="language-plaintext highlighter-rouge">_start</code> 함수부터라고 인식하지만, gdb를 붙여서 돌렸을 때 gdb는 쓸데없는 dll 실행은 넘겨 버리고 <code class="language-plaintext highlighter-rouge">main</code> 에 BP를 만들기 때문에 발생하는 현상이다. <del>gdb가 너무 똑똑해서 생긴 문제였다…!</del></p> </li> </ul> </li> </ul> </li> </ol> <hr /> <h2 id="context-pwndbg의-대시보드">Context: pwndbg의 대시보드</h2> <p>사실 Context라는 말은 프로세스 관련해서 많이 쓰이는 말이다. pwndbg는 이런 context의 특성을 차용해 <strong>프로세스 실행 시 주요 메모리들의 실시간 상태를 보여주는</strong> 자신의 대시보드를 <strong>Context</strong>라고 칭하고 있다.</p> <p>pwndbg의 context는 크게 4개의 영역으로 구분된다.</p> <p><img src="/assets/img/syshack3-1/Untitled%203.jpeg" alt="Untitled" /></p> <ol> <li>Registers: 레지스터의 상태를 보여준다. 레지스터의 종류가 뭐였지? 라는 의문이 든다면 <a href="https://toubva.github.io/blog/system-hacking-step2/#/">System Hacking Step2: Computer Architecture</a> 참고.</li> <li>Disasm: rip부터 시작해서 여러 줄에 걸쳐 디스어셈블된 결과를 보여주는 섹션이다. 즉, 앞으로 실행될 인스트럭션들을 어셈블리어로 보여주는 섹션이다.</li> <li>Stack: rsp부터 여러 줄에 걸쳐 스택의 값들을 보여준다. 스택의 맨 위부터 뭐가 있는지(스택에 뭐가 들어있는지 가장 최신의 것부터)를 어느 정도 보여준다는 뜻이다.</li> <li>Backtrace: 현재 rip에 도달할 때까지 어떤 함수들이 중첩되어 호출됐는지 보여준다. 화살표가 있는 부분이 현재 rip가 있는 함수이고, 그 밑에 있는 것들이 이제까지 호출됐던 함수 목록이다. 보통 이러면 콜스택 보여주지 않나? 왜 굳이 이미 지나가서 기능이 끝난 함수들을 보여주려 하지?</li> </ol> <hr /> <h2 id="breakcontinue">break&amp;continue</h2> <ul> <li>gdb를 이용해 프로그램을 분석할 땐, 프로그램의 동작 중 아주 일부분에만 관심이 있을 때이다.</li> <li>이러한 목적 달성을 위해 break와 continue라는 기능이 있다. <ul> <li>break: 특정 주소에 중단점(breakpoint)를 설정하는 기능</li> <li>continue: 현재 지점에서 다음 중단점까지 멈춤 없이 실행하는 기능</li> </ul> </li> </ul> <hr /> <h2 id="run">run</h2> <ul> <li>프로그램을 단순히 실행만 시키는 명령어.</li> <li>중단점에서 멈추지만, <strong>프로그램을 처음부터 시작한다-중단점이 있으면 멈춘다</strong>의 시퀀스이므로 <strong>중단점에서 시작한다-다음 중단점에서 멈춘다</strong>의 시퀀스를 가진 <strong>continue와는 확연한 차이점</strong>이 있다.</li> </ul> <aside> ⚙ gdb는 명령어 줄여쓰기 기능을 제공하기 때문에, 명령어를 특정할 수 있는 최소한의 문자열만 입력하면 자동으로 명령어를 찾아서 수행해 준다. 예를 들어서, 앞서 설명한 break는 b만 쳐도 되고, continue의 경우에는 c만 쳐도 된다. run 또한 r만 쳐도 자동으로 실행된다. </aside> <h2 id="disassembly">disassembly</h2> <ul> <li>gdb에서 기본으로 제공하는 디스어셈블 명령어.</li> <li> <p>함수 이름을 인자로 전달하면 해당 함수가 리턴될 때까지 전부 디스어셈블해 보여준다.</p> <p><img src="/assets/img/syshack3-1/Untitled%204.jpeg" alt="Untitled" /></p> </li> <li> <p>pwndbg에서는 <strong>u, nearpc, pdisassemble</strong>을 제공한다. 디스어셈블된 코드를 가독성 좋게 출력해준다는 점에서 쓸 만하다!</p> <p><img src="/assets/img/syshack3-1/Untitled%205.jpeg" alt="확실히 낫다." /></p> <p>확실히 낫다.</p> </li> </ul> <hr /> <h2 id="navigate-ni-si-finish">navigate: ni, si, finish</h2> <ul> <li>명령어를 한 줄씩 자세히 분석하는 기능. <ul> <li><strong>ni(next instruction)</strong>: 어셈블리 명령어를 딱 한 줄 실행한다. <strong>서브루틴의 내부로 들어가지 않는다.</strong></li> <li><strong>si(step into)</strong>: 어셈블리 명령어를 딱 한 줄 실행한다. <strong>서브루틴의 내부로 들어간다.</strong> <ul> <li><strong>finish</strong>: 함수 규모가 너무 커서 ni로는 도무지 원래 함수로 돌아올 수 없는 경우, 현재 위치한 함수의 맨 끝까지 한번에 실행할 수 있는 명령어.</li> </ul> </li> </ul> </li> <li>서브루틴이란? <ul> <li>함수 내부에서 다른 함수를 콜할 때, 그 다른 함수의 실행 루틴을 서브루틴이라고 한다.</li> <li>즉 서브루틴의 내부=현재 함수에서 콜한 다른 함수의 내부</li> </ul> </li> </ul> <hr /> <h2 id="examine-x">examine: x</h2> <ul> <li>가상 메모리에 존재하는 임의 주소의 값을 관찰해야 할 때 사용한다.</li> <li><strong>x</strong>: <strong>원하는 주소</strong>에서, <strong>원하는 길이</strong>만큼의 데이터를 <strong>원하는 형식으로 인코딩</strong>해 확인할 수 있다. <ul> <li>형식: <code class="language-plaintext highlighter-rouge">x/{원하는 데이터 묶음 수}{한 데이터 묶음의 길이}{데이터 형식} {메모리 주소}</code> <ul> <li>한 데이터 묶음의 길이(size): b(byte), h(halfword), w(word), g(giant; 8 bytes)</li> <li>데이터의 형식(format): o(octal), x(hex), d(decimal), u(unsigned decimal), t(binary), f(float), a(address), i(instruction), c(char), s(string), z(hex, zero padded on the left)</li> </ul> </li> </ul> </li> </ul> <hr /> <h2 id="telescope">telescope</h2> <ul> <li>pwndbg가 제공하는 메모리 덤프 기능. 메모리가 참조하고 있는 주소를 재귀적으로 탐색해 값을 보여주기까지 함!</li> <li>현재 보이는 이 값이 어떤 주소에서 어떻게 사용되는지까지 알 수 있으므로 굉장히 유용하다. <ul> <li> <p>rsp 기준으로 8개의 메모리 주소를 보여주기 때문에 콜스택의 역사를 알 수 있다.</p> <p><img src="/assets/img/syshack3-1/Untitled%206.jpeg" alt="Untitled" /></p> </li> </ul> </li> </ul> <hr /> <h2 id="vmmap">vmmap</h2> <ul> <li>가상 메모리의 레이아웃을 보여주며, 어떤 파일이 매핑된 영역일 때 해당 파일의 경로까지 보여줌.</li> <li> <p>cat /proc/{pid}/maps와 동일한 일을 한다. 물론 가독성은 훨씬 좋다.</p> <p><img src="/assets/img/syshack3-1/Untitled%207.jpeg" alt="Untitled" /></p> </li> </ul> <aside> ⚙ 파일 매핑: - 어떤 파일을 메모리에 적재하는 것. - 리눅스에서 ELF를 실행할 때의 과정: 1. ELF 자체의 코드, 데이터 등을 가상 메모리에 매핑 2. 해당 ELF에 링크된 공유 오브젝트(.so)를 추가로 메모리에 매핑 - 리눅스의 so = 윈도우의 dll 3. so에 구현된 함수를 호출할 땐 매핑된 메모리에 존재하는 함수를 대신 호출(메모리에 적재된 so 내부의 함수를 호출) </aside> <hr /> <h2 id="gdbpython">gdb/python</h2> <ul> <li>gdb를 이용해 디버깅 시, 숫자/알파벳 이외의 값은 입력값으로 직접 입력해줄 수 없는 문제가 있다.</li> <li>첫번째 방식: python argv <ul> <li>목표 프로그램에 gdb를 붙이고 r 명령어의 인자로 <code class="language-plaintext highlighter-rouge">$({원하는 내용을 줄 수 있는 파이썬 코드})</code> 를 입력하면 프로그램의 <strong>‘인자’</strong>를 전달할 수 있다.</li> <li> <p>사용예:</p> <p><img src="/assets/img/syshack3-1/Untitled%208.jpeg" alt="Untitled" /></p> </li> </ul> </li> <li>두번째 방식: python input <ul> <li>목표 프로그램에 gdb를 붙이고, r 명령어의 인자로 <code class="language-plaintext highlighter-rouge">&lt;&lt;&lt; $({파이썬 코드})</code> 를 입력하면 프로그램 실행 중에 받는 <strong>‘입력값’</strong>을 미리 전달할 수 있다.</li> <li> <p>사용예: *(해당 프로그램은 인자와 입력값 모두를 요구하기 때문에 첫번째 방식과 두번째 방식이 함께 쓰였다.)</p> <p><img src="/assets/img/syshack3-1/Untitled%209.jpeg" alt="Untitled" /></p> </li> </ul> </li> </ul> <hr /> <h2 id="그-외-자주-사용되는-명령어들과-그-단축키">그 외 자주 사용되는 명령어들과, 그 단축키</h2> <ul> <li>b: break</li> <li>c: continue</li> <li>r: run</li> <li>si: step into <ul> <li>어떤 함수 안으로 들어가는 것이다.</li> </ul> </li> <li>ni: next instruction <ul> <li>명령어를 딱 한 줄 더 실행하는 것이다.</li> </ul> </li> <li>i: info <ul> <li>접두어로 주로 사용되고, 접미로 붙는 요소의 정보를 확인하는 데 사용된다.</li> <li>예시: info b (현재 브레이크 포인트 보기)</li> </ul> </li> <li>k: kill <ul> <li>kill process</li> </ul> </li> <li>pd: pdisas <ul> <li>기존 gdb 명령어의 peda 버전으로, disas의 확장판이다.</li> <li>화면이 좀 더 예쁘게, 가독성 좋게 나온다. <del>기부니가 조크든요</del></li> </ul> </li> </ul> <hr /> <br /><!-- Load Facebook SDK for JavaScript --> <div id="fb-root"></div> <script> (function(d, s, id) { var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) return; js = d.createElement(s); js.id = id; js.src = "https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.0"; fjs.parentNode.insertBefore(js, fjs); })(document, "script", "facebook-jssdk"); </script> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8" ></script> <div class="share-page"> <p class="share-text">Share this on &rarr;</p> <a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-size="large" data-show-count="false" style="margin-top:5px;" >Tweet</a > <a class="fb-share-button" data-href="http://localhost:4000/blog/system-hacking-step3-1/" data-size="large" data-layout="button" >Share</a> </div><!-- Author box --> <div class="card"> <div class="card-header"> About TouBVA </div> <div class="card-body"> <div class="row"> <div class="col-md-4"> <img class="author-profile-img" src="http://localhost:4000/assets/img/authors/toubva.jpeg" alt="TouBVA" /> </div> <div class="col-md-6"> <p class="author_bio">A Security Researcher, now concentrating on Security Consulting.</p> <p>Email : touBVa@gmail.com</p> <p>Website : https://toubva.github.io</p> <p class="profile-links"> <a class="social-link" href="https://github.com/TouBVa" target="_blank"><i class="fab fa-github fa-fw"></i></a> <a class="social-link" href="https://www.linkedin.com/in/johndoe" target="_blank"><i class="fab fa-linkedin fa-fw"></i></a> <a class="social-link" href="https://www.youtube.com/channel/UCSfLBFFfNU9r6ihfei6VeJw" target="_blank"><i class="fab fa-youtube fa-fw"></i></a> <a class="social-link" href="https://www.facebook.com/johndoe" target="_blank"><i class="fab fa-facebook fa-fw"></i></a> <a class="social-link" href="https://www.twitter.com/johndoe" target="_blank"><i class="fab fa-twitter fa-fw"></i></a> </p> </div> </div> </div> </div> </div><!-- Incomment incase you want to use Disqus <div id="disqus_thread"></div> --> </article> <script> var disqus_config = function () { this.page.url = "http://localhost:4000/blog/system-hacking-step3-1/"; /* Replace PAGE_URL with your page's canonical URL variable */ this.page.identifier = "/blog/system-hacking-step3"; /* Replace PAGE_IDENTIFIER with your page's unique identifier variable */ }; (function () { /* DON'T EDIT BELOW THIS LINE */ var d = document, s = d.createElement('script'); s.src = 'https://disqus_2GfFhbLwdG.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a> </noscript></div> </div> <div class="row"> <div class="col-md-4"> <div class="card"> <div class="card-header">About TouBVa(UNI)</div> <div class="card-body"> <p class="author_bio">Welcome to my world!</p><!-- Place this tag where you want the github button to render. --> <a class="github-button" href="https://github.com/touBVa/touBVa.github.io" data-color-scheme="no-preference: dark; light: dark; dark: dark;" data-icon="octicon-star" data-size="large" data-show-count="true" aria-label="Star my blog on GitHub">Star</a> </div> </div> </div> <div class="col-md-4"> <div class="card"> <div class="card-header">Categories</div> <div class="card-body text-dark"> <div id="#System Hacking Basic"></div> <li class="tag-head"> <a href="/blog/categories/System Hacking Basic">System Hacking Basic</a> </li> <a name="System Hacking Basic"></a> </div> </div> </div> <div class="col-md-4"> <div class="card"> <div class="card-header">Useful Links</div> <div class="card-body text-dark"> <li> <a href="http://localhost:4000/">Home</a> </li> <li> <a href="http://localhost:4000/about">About</a> </li> <li> <a href="http://localhost:4000/blog">Blog</a> </li> <li> <a href="http://localhost:4000/contact">Contact</a> </li> </div> </div> </div> </div> </div> <div class="col-lg-12" id="newsletter_footer"><!-- Mailchimp Newletters --> <form action=""method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate> <div id="mc_embed_signup_scroll_footer"> <label for="mce-EMAIL_footer"> Signup for Weekly Email Newsletters :D</label> <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL_footer" placeholder="email address" required> <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups--> <div style="position: absolute; left: -5000px;" aria-hidden="true"> <input type="text" name="b_50bab1c85eae24ecfb0f68361_3a2dd721d0" tabindex="-1" value=""> </div><br /> <div class="clear"> <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe_footer" class="btn btn-lg btn-success"> </div> </div> </div><footer> <p> Powered by<a href="https://github.com/touBVa"> TouBVa</a>. Hosted at <a href="https://pages.github.com">Github</a>. Subscribe via <a href=" /feed.xml ">RSS</a> </p> </footer> <script> var options = { classname: 'progressline', id: 'my-id' }; var nanobar = new Nanobar( options ); nanobar.go( 30 ); nanobar.go( 76 ); nanobar.go(100); </script> <div hidden id="snipcart" data-api-key="Y2I1NTAyNWYtMTNkMy00ODg0LWE4NDItNTZhYzUxNzJkZTI5NjM3MDI4NTUzNzYyMjQ4NzU0"></div> <script src="https://cdn.snipcart.com/themes/v3.0.0-beta.3/default/snipcart.js" defer></script> <script src="http://localhost:4000/assets/js/mode-switcher.js"></script> <script> if (window.netlifyIdentity) { window.netlifyIdentity.on("init", user => { if (!user) { window.netlifyIdentity.on("login", () => { document.location.href = "/admin/"; }); } }); } </script> </body> </html>
